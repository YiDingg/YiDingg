# A 2.2-GHz ~ 3.3-GHz BB-PLL with Multiple Output Frequencies in TSMC 65-nm Technology

> [!Note|style:callout|label:Infor]
> Initially published by YiDingg at 21:21 on 2025-09-30 in Beijing.

## 1. Information

项目基本信息：
- 时间: 2025.09.09 ~ 2025.10.08
- 工艺:  <span style='color:red'>TSMC 65NM COMS </span> Mixed Signal RF SALICIDE Low-K IMD 1P6M-1P9M PDK (CRN65GP)
- 目标：设计一个满足指标要求的 Type-III BB-PLL，包括前仿、版图和后仿
- 作者：丁毅 (Yi Ding), 负责 LDO, OTA 和 DAC 三个模块的设计、仿真、版图和后仿

系统结构总览：
<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-10-08-19-35-54_A 2.2-GHz ~ 3.3-GHz BB-PLL with Multiple Output Frequencies in TSMC 65-nm Technology.png"/></div>



项目相关链接：
- **(1) LDO:** [Design of A Basic Low Dropout Regulator (LDO) for BB-PLL](<Projects/Design of A Basic Low Dropout Regulator (LDO) for BB-PLL.md>)
    - (a) 理论与指导：[LDO Stability Analysis and Loop Compensation Mechanism](<AnalogIC/LDO Stability Analysis and Loop Compensation Mechanism.md>)
    - (b) 设计与前仿：
        - [202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2 (1)](<AnalogICDesigns/202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2 (1).md>)
        - [202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2 (2)](<AnalogICDesigns/202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2 (2).md>)
    - (c) 版图与后仿：[202509_tsmcN65_LDO\_\_basic_in-1d8-to-2d5_out-1d2\_\_layout](<AnalogICDesigns/202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2__layout.md>)
- **(2) OTA:** [Design of An Adjustable Constant-Gm OTA for Low Pass Filter in BB-PLLs](<Projects/Design of An Adjustable Constant-Gm OTA for Low Pass Filters in BB-PLL.md>)
    - (a) 理论与指导：[Design of Constant-Gm Rail-to-Rail OTA](<AnalogIC/Design of Constant-Gm Rail-to-Rail OTA.md>)
    - (b) 设计与前仿：[202509_tsmcN65_OTA_constantGm_adjustable](<AnalogICDesigns/202509_tsmcN65_OTA_constantGm_adjustable.md>)
    - (c) 版图与后仿：[202509_tsmcN65_OTA_constantGm_adjustable__layout](<AnalogICDesigns/202509_tsmcN65_OTA_constantGm_adjustable__layout.md>)
- **(3) DAC:** [Design of A 5-Bit R-2R DAC for Reference Generation in BB-PLLs](<Projects/Design of A 5-Bit RDR DAC for Reference Generation in BB-PLLs.md>)
    - (a) 理论与指导：[202509_tsmcN65_DAC_RDR_5bit](<AnalogICDesigns/202509_tsmcN65_DAC_RDR_5bit.md>)
    - (b) 设计与前仿：[202509_tsmcN65_DAC_RDR_5bit](<AnalogICDesigns/202509_tsmcN65_DAC_RDR_5bit.md>) (同上)
    - (c) 版图与后仿：[202509_tsmcN65_DAC_RDR_5bit](<AnalogICDesigns/202509_tsmcN65_DAC_RDR_5bit.md>) (同上)

**注：本次项目的所有相关资料/原理图/版图已经上传到 123 云盘链接 https://www.123684.com/s/0y0pTd-bbSj3, 点击即可下载。**

## 2. Design Summary

### 2.1 LDO design summary


下表总结了 **v6_171321 (前仿)**、**v7_201154_layout (后仿)** 的全工艺角仿真结果 (ILOLAD = 15 mA, CLOAD = 20 pF)，与张钊老师提供的参考电路 **LDO_3.3_to_1.3_Low_Noise** 的结果作对比 (ILOAD = 10 mA, CLOAD = 10 pF)，红色表示更优：

<span style='font-size:11px'>
<div class='center'>

| Parameter | Pre-Simulation <br> (v6_171321) | Post-Simulation <br> (v7_201154_layout) | Reference |
|:-:|:-:|:-:|:-:|
 | PM |  76.90° ~ 93.26° | <span style='color:red'> 85.86° ~ 98.96° </span> | 80.8° ~ 82.62° |
 | GM | 15.15 dB ~ 17.85 dB | 16.07 dB ~ 23.69 dB | <span style='color:red'> 42.55 dB ~ 46.09 dB </span> |
 | PSRR Peaking | -2.305 dB ~ -4.585 dB <br> (-12.62 dB ~ -20.82 dB @ ILOAD = 10 uA) | -2.934 dB ~ -5.081 dB <br> (-13.27 dB ~ -19.14 dB @ ILOAD = 10 uA) | <span style='color:red'> -23.23 dB ~ -23.88 dB </span> |
 | PSRR @ DC    | <span style='color:red'> -52.24 dB ~ -84.37 dB </span> | -54.16 dB ~ -72.95 dB | -60.79 dB ~ -63.94 dB |
 | PSRR @ 5 MHz | <span style='color:red'> -44.79 dB ~ -55.79 dB </span> | -41.79 dB ~ -47.02 dB | -38.44 dB ~ -40.51 dB |
 | Output Noise @ 1 MHz | <span style='color:red'> 9.993 nV/sqrt(Hz) ~ 14.73 nV/sqrt(Hz) </span> | 10.25 nV/sqrt(Hz) ~ 14.92 nV/sqrt(Hz) | 38.71 nV/sqrt(Hz) ~ 44.48 nV/sqrt(Hz) |
 | Integrated Noise (100 Hz ~ 1 MHz) | <span style='color:red'> 20.35 uVrms ~ 25.03 uVrms </span> | 20.73 uVrms ~ 25.28 uVrms | 50.25 uVrms ~ 68.55 uVrms |
 | Maximum Load Cap | 460 pF @ PM = 45° | 450 pF @ PM = 45° | <span style='color:red'> 5.0 nF @ PM = 45° </span> |

</div></span>

更细致的仿真结果：

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-21-01-51-04_Virtuoso Tutorials - 15. Several Methods for PEX (Parasitic Extraction) and Post-Simulation.png"/></div>

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-21-16-14-53_202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2__layout.png"/></div>


原理图和版图：

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-22-14-26-11_202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2__layout.png"/></div>
<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-22-14-25-19_202509_tsmcN65_LDO__basic_in-1d8-to-2d5_out-1d2__layout.png"/></div>


### 2.2 OTA design summary

下表总结了 OTA 的全温度-工艺角仿真结果：

<div class='center'>

| Parameter | Pre-Simulation | Post-Simulation |
|:-:|:-:|:-:|
 | **Narrowest Gm Range** | **1.369 uS ~ 18.68 uS** | **1.403 uS ~ 18.76 uS** |
 | **Widest Gm Range**    | **1.093 uS ~ 28.75 uS** | **1.110 uS ~ 28.96 uS** |
 | Gm @ `(0)_10  = (0000)_2`  | 1.290 uS (1.093 uS ~ 1.369 uS) | 1.306 uS (1.110 uS ~ 1.403 uS) |
 | Gm @ `(7)_10  = (0111)_2`  | 13.54 uS (12.26 uS ~ 16.94 uS) | 13.64 uS (12.35 uS ~ 17.14 uS) |
 | Gm @ `(15)_10 = (1111)_2`  | 21.91 uS (18.68 uS ~ 28.75 uS) | 22.06 uS (18.76 uS ~ 28.96 uS) |
 | IDD @ `(0)_10  = (0000)_2` | 118.2 uA (79.67 uA ~ 249.8 uA) | 113.7 uA (77.67 uA ~ 229.2 uA) |
 | IDD @ `(7)_10  = (0111)_2` | 161.4 uA (118.6 uA ~ 297.5 uA) | 156.5 uA (116.4 uA ~ 276.4 uA) |
 | IDD @ `(15)_10 = (1111)_2` | 188.2 uA (140.1 uA ~ 329.5 uA) | 183.1 uA (137.7 uA ~ 308.2 uA) |

</div>

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-30-20-42-39_202509_tsmcN65_OTA_constantGm_adjustable__layout.png"/></div>


原理图和版图：

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-30-20-08-22_202509_tsmcN65_OTA_constantGm_adjustable__layout.png"/></div>

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-09-30-18-18-21_202509_tsmcN65_OTA_constantGm_adjustable__layout.png"/></div>

### 2.3 DAC design summary

下表总结了本次 DAC 设计的前后仿结果，与参考电路 (28nm) 的仿真结果作对比：

<div class='center'>

| Parameter | This Work (Pre-Simul.) | This Work (Post-Simul.) | Reference (Pre-Simul.) | Reference (Post-Simul.) |
|:-:|:-:|:-:|:-:|:-:|
 | Average output error (TT, +65°C) | -0.140\% | -0.150\% | -0.044\% | -0.419\% |
 | Average output error (all corners) | -0.172\% ~ -0.098\% | -0.199\% ~ -0.116\% | -0.189\% ~ -0.019\% | -1.038\% ~ -0.326\% |

</div>

<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-10-02-01-18-18_202509_tsmcN65_DAC_RDR_5bit.png"/></div>
<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-10-02-01-20-08_202509_tsmcN65_DAC_RDR_5bit.png"/></div>

原理图和版图：
<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-10-08-19-56-29_Design of A 5-Bit RDR DAC for Reference Generation in BB-PLLs.png"/></div>
<div class="center"><img src="https://imagebank-0.oss-cn-beijing.aliyuncs.com/VS-PicGo/2025-10-02-01-03-01_202509_tsmcN65_DAC_RDR_5bit.png"/></div>


## References

LDO 参考资料：
- [[1] 知乎 > 王小桃带你读文献：低压差线性稳压器 LDO Low Dropout Regulator](https://zhuanlan.zhihu.com/p/19362115112)
- [[2]](https://libyw.ucas.ac.cn/https/63HNga92DoxwAYPr51CYnV8eWBha67Ly8CNtBH8tNL/document/10762683/) X. Liang, X. Kuang, J. Yang, and L. Wang, “A Fast Transient Response Output-capacitorless LDO With Low Quiescent Power,” in 2024 3rd International Conference on Electronics and Information Technology (EIT), Chengdu, China: IEEE, Sep. 2024, pp. 314–317. doi: 10.1109/EIT63098.2024.10762683.
- [[3]](https://ieeexplore.ieee.org/document/7847927) M. M. Elkhatib, “A capacitor-less LDO with improved transient response using neuromorphic spiking technique,” in 2016 28th International Conference on Microelectronics (ICM), Giza, Egypt: IEEE, Dec. 2016, pp. 133–136. doi: 10.1109/ICM.2016.7847927.

OTA 参考资料：
- [{1} 知乎 > 运算放大器跨导恒定轨到轨输入级 (Constant-gm Rail-to-Rail Input Stage)](https://zhuanlan.zhihu.com/p/658369226?): 介绍了多达 17 种 Gm-Variation Reduction Techniques
- [{2} Bilibili > 1224 Class AB 输出的浮动电流源偏置问题](https://www.bilibili.com/opus/704842448804773954): 详细讨论了 constant-gm OPA with Class AB 输出中的浮动电流源偏置问题及其解决方案
- [{3} GihHub > Constant gm rail-to-rail OP-AMP input stage](https://github.com/AhmedHamdyy19/constant-gm-rail-to-rail-opamp-input-stage): 利用 current mirror control 的 singled-ended output 实例 (180nm CMOS)
- [1] R. Hogervorst, J. P. Tero, R. G. H. Eschauzier, and J. H. Huijsing, “A compact power-efficient 3 V CMOS rail-to-rail input/output operational amplifier for VLSI cell libraries,” in Proceedings of IEEE International Solid-State Circuits Conference - ISSCC ’94, San Francisco, CA, USA: IEEE, 1994, pp. 244–245. doi: 10.1109/ISSCC.1994.344656.
- [2] G.-D. Dai, P. Huang, L. Yang, and B. Wang, “A Constant Gm CMOS Op-Amp with Rail-to-Rail input/output stage,” in 2010 10th IEEE International Conference on Solid-State and Integrated Circuit Technology, Shanghai, China: IEEE, Nov. 2010, pp. 123–125. doi: 10.1109/ICSICT.2010.5667830.
- [3] Il Kwon Chang, Jang Woo Park, Se Jun Kim, and Kae Dal Kwack, “A global operational amplifier with constant-gm input and output stage,” in Proceedings of IEEE. IEEE Region 10 Conference. TENCON 99. “Multimedia Technology for Asia-Pacific Information Infrastructure” (Cat. No.99CH37030), Cheju Island, South Korea: IEEE, 1999, pp. 1051–1054. doi: 10.1109/TENCON.1999.818603.
- [4] X. Zhao, H. Fang, and J. Xu, “A low power constant-Gm rail-to-rail operational transconductance amplifier by recycling current,” in 2011 IEEE International Conference of Electron Devices and Solid-State Circuits, Tianjin, China: IEEE, Nov. 2011, pp. 1–2. doi: 10.1109/EDSSC.2011.6117572.
- [5] W. Xichuan, D. Huan, and Z. Ting, “A Rail-To-Rail Op-Amp with Constant Gm Using Current Switches,” in High Density Design Packaging and Microsystem Integration, 2007 International Symposium on, IEEE, Jun. 2007, pp. 1–3. doi: 10.1109/HDP.2007.4283626.
- [6] L. L. Malavolta, R. L. Moreno, and T. C. Pimenta, “A self-biased operational amplifier of constant gm for 1.5 V rail-to-rail operation in 130nm CMOS,” in 2016 28th International Conference on Microelectronics (ICM), Giza, Egypt: IEEE, Dec. 2016, pp. 45–48. doi: 10.1109/ICM.2016.7847904.
- [7] J. Wang, L. Huang, and J. Li, “Constant- $g_{m}$ Rail-To-Rail Input/Output Operational Amplifier,” in 2025 IEEE 14th International Conference on Communications, Circuits and Systems (ICCCAS), Wuhan, China: IEEE, May 2025, pp. 87–92. doi: 10.1109/ICCCAS65806.2025.11102681.
- [8] J.-L. Lai, T.-Y. Lin, C.-F. Tai, Y.-T. Lai, and R.-J. Chen, “Design a low-noise operational amplifier with constant-gm”.
- [9] Y. Hao, S. He, and P. Xiao, “Design of a Constant-Gm Rail-to-Rail Operational Amplifier with Chopper Stabilization,” in 2025 5th International Conference on Electronics, Circuits and Information Engineering (ECIE), Guangzhou, China: IEEE, May 2025, pp. 583–587. doi: 10.1109/ECIE65947.2025.11086613.
- [10] Z. Wu, F. Rui, Z. Zhi-Yong, and C. Wei-Dong, “Design of a Rail-to-Rail Constant-gm CMOS Operational Amplifier,” in 2009 WRI World Congress on Computer Science and Information Engineering, Los Angeles, California USA: IEEE, 2009, pp. 198–201. doi: 10.1109/CSIE.2009.173.
- [11] A. C. Veselu, C. Stanescu, and G. Brezeanu, “Low Current Constant-gm Technique for Rail-to-Rail Operational Amplifiers,” in 2020 International Semiconductor Conference (CAS), Sinaia, Romania: IEEE, Oct. 2020, pp. 253–256. doi: 10.1109/CAS50358.2020.9267977.
- [12] N. Baxevanakis, I. Georgakopoulos, and P. P. Sotiriadis, “Rail-to-rail operational amplifier with stabilized frequency response and constant-gm input stage,” in 2017 Panhellenic Conference on Electronics and Telecommunications (PACET), Xanthi, Greece: IEEE, Nov. 2017, pp. 1–4. doi: 10.1109/PACET.2017.8259966.

DAC 参考资料：
- [ChipDeubug > 全网最完整易理解的 R-2R DAC原理分析](https://chipdebug.com/forum-post/54266.html)
- [知乎 > R-2R梯形DAC – 通过示例电路图进行说明](https://zhuanlan.zhihu.com/p/665047757)
- [ADI > DAC 基本架构 II: 二进制 DAC](https://www.analog.com/media/cn/training-seminars/tutorials/mt-015_cn.pdf)
- [Electronics Tutorials > R-2R DAC](https://www.electronics-tutorials.ws/combination/r-2r-dac.html)
- [sasasatori > 模拟集成电路设计系列博客——6.2.2 基于 R-2R 的DAC](https://www.cnblogs.com/sasasatori/p/18169793)
- [知乎 > R_2R电阻网络DAC原理分析](https://zhuanlan.zhihu.com/p/39222238)
- [CSDN > 电压模式 R-2R DAC 的工作原理和特性](https://blog.csdn.net/Jack15302768279/article/details/139598475)
